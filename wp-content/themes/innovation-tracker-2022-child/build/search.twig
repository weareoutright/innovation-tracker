{% extends 'base.twig' %}

{% block content %}
  {% include 'hero_with_cta.twig' with {
      fields:{
          headline: "Search NIRH.org",
          interior: true
      }
  }%}
  {% include 'archive-filters.twig' with {form_fields:form_fields,keyword:false} %}
  <div class="post__section post__section-summary">
    <div class="container">
      <div class="row">
        <div class="col-12 col-lg-6">
          {% if query.s is empty %}
            <p class="summary__info">Search for site content by keyword above.</p>
          {% elseif results|length %}
            <h2>Results: <em>{{ query.s }}</em></h2>
          {% endif %}
        </div>
        <div class="col-12 col-lg-6">
          {% if posts.pagination and query.s is not empty %}
            {% include 'pagination.twig' with {pagination:posts.pagination} %}
          {% endif %}
        </div>
        <div class="col-12">
          <hr>
        </div>
      </div>
    </div>
  </div>
  {% if query.s is not empty %}
    <div class="post__section post__section-archive component">
      <div class="post__subsection post__subsection-results">
        <div class="container">
          <div class="row">
            <div class="col-12">
              {% if results is not empty %}
                <ul class="list-unstyled">
                {% for result in results %}
                  {% set post = TimberPost(result) %}
                  <li class="search-result">
                    <article class="post__preview post__preview-plain">
                      <a href="{{ post.link }}">
                        {% if post.thumbnail and post.thumbnail.src %}<div class="post__image" style="background-image:url({{ post.thumbnail.src }})"></div>{% endif %}
                        <em class="post__type">{{ post.get_post_type.labels.singular_name }}</em><br>
                        <h3 class="post__title">{{ post.title }}</h3>
                      </a>
                    </article>
                  <li>
                {% endfor %}
                </ul>
              {% else %}
                <h2 class="no-results">No results</h2>
                <p>Sorry, there is no content that matches your search filters. Please try a different search.</p>
              {% endif %}
            </div>
            <div class="col-12">
              <hr>
            </div>
            <div class="col-12 col-lg-6"></div>
            <div class="col-12 col-lg-6">
              {% if posts.pagination %}
                {% include 'pagination.twig' with {pagination:posts.pagination} %}
              {% endif %}
            </div>       
          </div>
        </div>
      </div>
    </div>
  {% endif %}

{% endblock %}